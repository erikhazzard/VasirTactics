/*=======================================
Something
========================================= */
((function(){" ========================================================================    \n namespace.js\n ----------------------\nSets up the namespace for our game, along with setting up any global\n    util functions\n ========================================================================";var a,b=this;a=function(){return{events:_.extend({},Backbone.Events),Views:{},Models:{},Collections:{},game:{},interaction:{},logger:{},init:function(){return{}},util:{},templates:{}}}(),window.GAME_NAME=a," ========================================================================    \n\nGlobal Util Functions\n\n========================================================================",window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){return window.setTimeout(a,1e3/60)}}(),$(document).ready(function(){return _.templateSettings={interpolate:/\{\{(.+?)\}\}/g}})})).call(this),function(){" ========================================================================    \n\nLogging System\n    \n======================================================================== ";var a;a=window.GAME_NAME.logger,a.options={log_level:"all"},a.history={},a.can_log=function(b){"This function takes in a type (e.g., 'warn') and checks to see if\nit exists in the logger.options.log_level option";var c,d;return d=!1,c=a.options.log_level,c==="all"||c===!0?d=!0:c instanceof Array?c.indexOf(b)>-1&&(d=!0):c===null||c===void 0||c==="none"||c===!1?d=!1:c===b&&(d=!0),d},a.log=function(b){"When using logger.log, you must pass in a type\ne.g.\n    logger.debug( arg1, arg2, etc. )";var c,d,e;c=Array.prototype.slice.call(arguments);if(b==null||arguments.length===1)b="debug",c.splice(0,0,"debug");return a.can_log(b)?(d=new Date,c.push({Date:d,Milliseconds:d.getMilliseconds(),Time:d.getTime()}),e=a.history,e[b]=e[b]||[],e[b].push(c),window.console&&console.log(Array.prototype.slice.call(c)),!0):!1},a.options.log_types=["debug","error","info","warn"],a.options.setup_log_types=function(){"This function will setup log types based on the ones available in\nlogger.options.log_types.  It can be called whenever to \ndynamically add log types";var b,c,d,e,f;e=a.options.log_types,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(function(b){return a[b]=function(){var c;return c=Array.prototype.slice.call(arguments),c.splice(0,0,b),a.log.apply(null,c)}}(b));return f},a.options.setup_log_types()," ========================================================================    \nConfigure console.log\n======================================================================== ",window.console&&a.options&&(a.options.log_level==="none"||a.options.log_level===null)&&(console.log=function(){return{}}),window.console==null&&(window.console={log:function(){return{}}}),window.onerror=function(b,c,d){return a.error(b,c,d),!1}}.call(this),function(){" ========================================================================    \ncreature.coffee\n\nContains the class definitions for creatures\n\n======================================================================== "," ========================================================================    \nAdd logging types\n======================================================================== ";var a=this;GAME_NAME.logger.options.log_types.push("Util"),GAME_NAME.logger.options.setup_log_types()," ========================================================================    \n\nUtils\n\n======================================================================== ",GAME_NAME.util=function(){var a;return a=function(a){return console.log(a)},{delegateSVGEvents:a}}()}.call(this),function(){" ========================================================================    \ngame.coffee\n\nCotains the Game model.  A game is instaniated in init and contains\na map, renderer, reference to players, creatures, etc.\n\n======================================================================== "," ========================================================================    \nAdd logging types\n======================================================================== ";var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};GAME_NAME.logger.options.log_types.push("Game"),GAME_NAME.logger.options.setup_log_types()," ========================================================================    \n\nModel    \n\n======================================================================== ",GAME_NAME.Models.Game=function(b){function d(){this.getMap=a(this.getMap,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={id:"game_name_01",players:{playerID:{},playerID2:{}},activePlayer:void 0,map:{},renderer:{},_state:{}},d.prototype.initialize=function(){"Set everything up";var a;return a={},a.interaction=new GAME_NAME.Models.Interface,a.interactionView=new GAME_NAME.Views.Interface({model:a.interaction}),a.interactionView.render(),a.map=new GAME_NAME.Models.Map,a.renderer=new GAME_NAME.Views.Renderer({game:this}),this.set(a),this},d.prototype.getMap=function(){return"This function will get the map from the server"},d}(Backbone.Model)}.call(this),function(){" ========================================================================    \ncell.coffee\n\nContains the definition for individual cells that make up the map \n======================================================================== "," ========================================================================    \nAdd logging types\n======================================================================== ";var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};GAME_NAME.logger.options.log_types.push("Cell"),GAME_NAME.logger.options.setup_log_types()," ========================================================================    \n\nView\n\n======================================================================== ",GAME_NAME.Views.Cell=function(b){function d(){this.targetHtml=a(this.targetHtml,this),this.mouseLeave=a(this.mouseLeave,this),this.mouseEnter=a(this.mouseEnter,this),this.target=a(this.target,this),this.click=a(this.click,this),this.render=a(this.render,this),this.delegateSVGEvents=a(this.delegateSVGEvents,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.events={click:"click",mouseover:"mouseEnter",mouseout:"mouseLeave"},d.prototype.initialize=function(){return"This cell view is created in Renderer",this.options.model===void 0||this.options.cellSize===void 0||this.options.group===void 0?(GAME_NAME.logger.error("ERROR","cell view: params not properly passed in"),!1):(this.model=this.options.model,this.model.on("cell:targeted",this.target),this.cellSize=this.options.cellSize,this.group=this.options.group,this.x=this.model.get("x")*this.cellSize.width,this.y=this.model.get("y")*this.cellSize.height,this.interaction=GAME_NAME.game.get("interaction"),this.el={},this)},d.prototype.delegateSVGEvents=function(){var a,b,c;c=this.events;for(a in c)b=c[a],this.svgEl.on(a,this[b]);return this},d.prototype.render=function(a){"Render creates the map tile cells and the group containing them\nExpects a renderer model object to be passed in";var b;return a=a||{},a.renderer===void 0?(GAME_NAME.logger.error("ERROR","cell render(): renderer not passed in"),!1):(this.tile_group=this.group.append("svg:g").attr("class","tile_group tile_group_"+this.x+","+this.y).attr("transform","translate("+[this.x,this.y]+")"),this.baseSprite=this.tile_group.append("svg:image").attr("class","map_tile_image").attr("x",0).attr("y",0).attr("width",this.options.cellSize.width).attr("height",this.options.cellSize.height).attr("xlink:href",a.renderer.get("sprites")[this.model.get("baseSprite")]),this.model.get("topSprite")&&(this.topSprite=this.tile_group.append("svg:image").attr("class","map_tile_image_overlay").attr("x",0).attr("y",0).attr("width",this.options.cellSize.width).attr("height",this.options.cellSize.height).attr("xlink:href",a.renderer.get("sprites")[this.model.get("topSprite")])),b=this.tile_group.append("svg:rect").attr("class","map_tile tile_"+this.x+","+this.y).attr("x",0).attr("y",0).attr("width",this.options.cellSize.width).attr("height",this.options.cellSize.height),this.el=b.node(),this.svgEl=b,this.delegateSVGEvents())},d.prototype.click=function(){if(!this.interaction.get("target")||this.interaction.get("target").get("className")!=="creature")return this.interaction.set({target:this.model,targetHtml:this.targetHtml()});if(!this.svgEl.classed("tile_disabled"))return this.interaction.get("target").move({cell:this.model})},d.prototype.target=function(){return this},d.prototype.mouseEnter=function(){return this.svgEl.classed("map_tile_mouse_over",!0),this},d.prototype.mouseLeave=function(){return this.svgEl.classed("map_tile_mouse_over",!1),this},d.prototype.targetHtml=function(){var a;return a=_.template(GAME_NAME.templates.target_cell)({name:this.model.get("name"),health:""}),a},d}(Backbone.View)," ========================================================================\n\nModel\n\n======================================================================== ",GAME_NAME.Models.Cell=function(b){function d(){this.target=a(this.target,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={name:"cell_i,j",className:"cell",i:0,j:0,baseSprite:"",topSprite:"",type:"0",graphic:""},d.prototype.initialize=function(){return this},d.prototype.target=function(){return this.trigger("cell:targeted"),this},d}(Backbone.Model)}.call(this),function(){" ========================================================================    \ncreature.coffee\n\nContains the class definitions for creatures\n\n======================================================================== "," ========================================================================    \nAdd logging types\n======================================================================== ";var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};GAME_NAME.logger.options.log_types.push("Creature"),GAME_NAME.logger.options.setup_log_types()," ========================================================================    \n\nVIEW \n\n======================================================================== ",GAME_NAME.Views.Creature=function(b){function d(){this.targetHtml=a(this.targetHtml,this),this.mouseLeave=a(this.mouseLeave,this),this.mouseEnter=a(this.mouseEnter,this),this.target=a(this.target,this),this.creatureClicked=a(this.creatureClicked,this),this.update=a(this.update,this),this.render=a(this.render,this),this.delegateSVGEvents=a(this.delegateSVGEvents,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.events={click:"creatureClicked"},d.prototype.initialize=function(){return"This creature view is created in Renderer",this.options.model===void 0||this.options.game===void 0||this.options.group===void 0?(GAME_NAME.logger.error("ERROR","creature view init(): params not properly passed in"),!1):(this.model=this.options.model,this.model.on("change:location",this.update),this.game=this.options.game,this.map=this.options.game.get("map"),this.renderer=this.options.game.get("renderer"),this.cellSize=this.renderer.model.get("cellSize"),this.group=this.options.group,this.interaction=GAME_NAME.game.get("interaction"),this.model.on("creature:targeted",this.target),this.el={},this)},d.prototype.delegateSVGEvents=function(){var a,b,c;c=this.events;for(a in c)b=c[a],this.svgEl.on(a,this[b]);return this},d.prototype.render=function(a){"Handles the actual rendering / drawing of the creature";var b,c;return this.x=this.model.get("location").x*this.cellSize.width,this.y=this.model.get("location").y*this.cellSize.height,c=this.group.append("svg:g").attr("class","creature_"+this.model.cid).attr("transform","translate("+[this.x,this.y]+")"),b=c.append("svg:rect").attr("class","creature_background_rect").attr("x",0).attr("y",0).attr("rx",6).attr("ry",6).attr("width",this.cellSize.width).attr("height",this.cellSize.height),c.append("svg:image").attr("x",0).attr("y",0).attr("width",this.cellSize.width).attr("height",this.cellSize.height).attr("xlink:href",this.renderer.model.get("sprites")[this.model.get("sprite")]),this.el=c.node(),this.svgEl=c,this.delegateSVGEvents(),this},d.prototype.update=function(){return this.x=this.model.get("location").x*this.cellSize.width,this.y=this.model.get("location").y*this.cellSize.height,this.svgEl.transition().duration(900).attr("transform","translate("+[this.x,this.y]+")")},d.prototype.creatureClicked=function(){"Fired off when the user clicks on a creature";var a;return this.interaction.get("target")===this.model?this.interaction.set({target:void 0}):(a=this.targetHtml(),this.interaction.set({target:this.model,targetHtml:a})),this},d.prototype.target=function(){var a,b,c,d,e,f,g,h,i,j;b=this.model.get("location").x,c=this.model.get("location").y,h=d3.selectAll(".map_tile_selected").classed("map_tile_selected",!1),f=d3.selectAll(".map_tile").classed("tile_disabled",!0),d=this.model.calculateMovementCells(),e=this.map.get("cells");for(i=0,j=d.length;i<j;i++)a=d[i],a=e[a.get("x")+","+a.get("y")].get("view").svgEl,a.classed("tile_disabled",!1);return g=this.svgEl.select("rect"),g.classed("map_tile_selected",!0),this},d.prototype.mouseEnter=function(){var a;return a=this.svgEl.select("rect"),a.classed("map_tile_mouse_over",!0),this},d.prototype.mouseLeave=function(){var a;return a=this.svgEl.select("rect"),a.classed("map_tile_mouse_over",!1),this},d.prototype.targetHtml=function(){var a;return a=_.template(GAME_NAME.templates.target_creature)({name:this.model.get("name"),health:this.model.get("health"),movesLeft:this.model.get("movesLeft")}),a},d}(Backbone.View)," ========================================================================    \n\nModel    \n\n======================================================================== ",GAME_NAME.Models.Creature=function(b){function d(){this.canMove=a(this.canMove,this),this.move=a(this.move,this),this.calculateMovementCells=a(this.calculateMovementCells,this),this.target=a(this.target,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={name:"Toestubber",className:"creature",attack:1,health:1,target:{},effects:[],abilities:[],moves:3,movesLeft:3,location:{x:Math.round(Math.random()*5),y:Math.round(Math.random()*5)},sprite:"creature_dragoon",type:"ground",owner:void 0},d.prototype.initialize=function(){return this},d.prototype.target=function(){return this.trigger("creature:targeted"),this},d.prototype.calculateMovementCells=function(a){var b,c,d,e,f,g,h,i,j;a=a||{},b=a.cells||GAME_NAME.game.get("map").get("cells"),h=[],c=this.get("location"),i=this.get("movesLeft"),g=i,j=-i;for(e=j;j<=g?e<=g:e>=g;j<=g?e++:e--)for(f=j;j<=g?f<=g:f>=g;j<=g?f++:f--)d=b[c.x+e+","+(c.y+f)],d!==void 0&&(d.get("canPass")==="all"||d.get("canPass")===this.get("type"))&&h.push(d);return h},d.prototype.move=function(a){var b;return a=a||{},b=a.cell,b||GAME_NAME.logger.error("creature model: move(): no cell passed into params"),this.set({location:{x:b.get("x"),y:b.get("y")}}),this},d.prototype.canMove=function(a){var b;return a=a||{},b=a.cell,b||GAME_NAME.logger.error("creature model: move(): no cell passed into params"),!0},d}(Backbone.Model)," ========================================================================    \n\nColections\n\n======================================================================== ",GAME_NAME.Collections.Creatures=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.model=GAME_NAME.Models.Creature,b}(Backbone.Model)}.call(this),function(){" ========================================================================    \ninteraction.coffee\n\nCotains the game's Interface.  The interaction controls all user interaciton\nwith the game / UI\n\n======================================================================== "," ========================================================================    \nAdd logging types\n======================================================================== ";var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};GAME_NAME.logger.options.log_types.push("Interface"),GAME_NAME.logger.options.setup_log_types()," ========================================================================    \n\nVIEW \n\n======================================================================== ",GAME_NAME.Views.Interface=function(b){function d(){this.renderTarget=a(this.renderTarget,this),this.unTargetTiles=a(this.unTargetTiles,this),this.target=a(this.target,this),this.render=a(this.render,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),"Renders the interaction and handles firing off / listening for events",d.prototype.initialize=function(){return this.model=this.options.model,this.model.on("change:target",this.target),this.model.on("change:targetHtml",this.renderTarget),this.$targetEl=$("#game_target_wrapper .game_target")},d.prototype.render=function(){return this},d.prototype.target=function(){var a;return a=this.model.get("target"),this.unTargetTiles(),a!==void 0?a.target():this.model.set({targetHtml:""})},d.prototype.unTargetTiles=function(){return d3.select(".map_tile_selected").classed("map_tile_selected",!1),d3.selectAll(".tile_disabled").classed("tile_disabled",!1)},d.prototype.renderTarget=function(){return this.$targetEl.html(this.model.get("targetHtml"))},d}(Backbone.View)," ========================================================================    \n\nModel    \n\n======================================================================== ",GAME_NAME.Models.Interface=function(b){function d(){this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={target:void 0,targetHtml:""},d.prototype.initialize=function(){return this},d}(Backbone.Model)}.call(this),function(){" ========================================================================    \nmap.coffee\n\nContains the definition for map, which is retrieved from server and made\nup of cells.  A Map object is made up of map cells and the Map\nis owned by the Game object\n\n======================================================================== "," ========================================================================    \nAdd logging types\n======================================================================== ";var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};GAME_NAME.logger.options.log_types.push("Map"),GAME_NAME.logger.options.setup_log_types()," ========================================================================    \n\nModel    \n\n======================================================================== ",GAME_NAME.Models.Map=function(b){function d(){this.setupCells=a(this.setupCells,this),this.randomizeMap=a(this.randomizeMap,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={name:"Faydwer",map:[[{},{}],[{},{}]],cells:{}},d.prototype.initialize=function(){return"A Map object is created in the Game class",this.set({map:this.randomizeMap()}),this.setupCells({map:this.map}),this},d.prototype.randomizeMap=function(){var a,b,c,d,e,f;c=[];for(a=0;a<=16;a++){e=[];for(b=0;b<=8;b++)d=Math.round(Math.random()*3),f={baseSprite:"terrain_"+Math.round(Math.random()*1),topSprite:[void 0,void 0,void 0,"rock"][d],canPass:["all","ground","ground","air"][d]},e.push(f);c.push(e)}return c},d.prototype.setupCells=function(a){"Setup the game cells.  This is called from init and\nthe cells are setup based on this model's map array\nTakes in a array of cells ";var b,c,d,e,f,g,h,i,j,k;a=a||{},a.map=a.map||this.get("map"),d=0,e=0,c={},k=a.map;for(g=0,i=k.length;g<i;g++){f=k[g],e=0;for(h=0,j=f.length;h<j;h++)b=f[h],c[d+","+e]=new GAME_NAME.Models.Cell({name:"cell_"+d+","+e,x:d,y:e,baseSprite:b.baseSprite,topSprite:b.topSprite,type:b.type,canPass:b.canPass}),e++;d++}return this.set({cells:c}),GAME_NAME.logger.Map("MAP: cells set, cells: ",this.get("cells"))},d}(Backbone.Model)}.call(this),function(){" ========================================================================    \nplayer.coffee\n\nContains the class (view and model) definitions for the player class\n\n======================================================================== "," ========================================================================    \nAdd logging types\n======================================================================== ";var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};GAME_NAME.logger.options.log_types.push("Player"),GAME_NAME.logger.options.setup_log_types()," ========================================================================    \n\nVIEW \n\n======================================================================== ",GAME_NAME.Views.Player=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),"The Player view.  This is basically just an empty class, as \nthere are no elements directly tied to the player",c}(Backbone.View)," ========================================================================    \n\nModel    \n\n======================================================================== ",GAME_NAME.Models.Player=function(a){function d(){this.initialize=c(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.defaults={name:"Soandso",id:"some_long_string",health:20,mana:1,regenRate:.5,target:{},spells:[],attack:1,location:[0,0]},d.prototype.initialize=function(){return this},d}(Backbone.Model)}.call(this),function(){" ========================================================================    \nrenderer.coffee\n\nHandles the actual drawing / rendering of the game\n\n======================================================================== "," ========================================================================    \nAdd logging types\n======================================================================== ";var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};GAME_NAME.logger.options.log_types.push("Render"),GAME_NAME.logger.options.setup_log_types()," ========================================================================    \n\nRenderer\n\n======================================================================== ",GAME_NAME.Views.Renderer=function(b){function d(){this.drawCreature=a(this.drawCreature,this),this.drawMap=a(this.drawMap,this),this.drawCreatures=a(this.drawCreatures,this),this.render=a(this.render,this),this.renderUI=a(this.renderUI,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el="#canvas_game",d.prototype.events={},d.prototype.initialize=function(){return"Create the renderer view.  This should be called from game.js",this.options.game===void 0?(GAME_NAME.logger.error("ERROR! renderer view: options.game not set, pass in game!"),!1):(this.model=new GAME_NAME.Models.Renderer({game:this.options.game}),this.svgEl=d3.select("#game_canvas"),this)},d.prototype.renderUI=function(){var a,b,c,d,e,f,g,h,i;e=this.model.get("game").get("players"),a=this.model.get("game").get("activePlayer"),c=[];for(b in e)d=e[b],c.push("<li>"+d.get("name")+": "+d.get("health")+"HP </li>");$("#game_player_info_wrapper .player_list").html(c.join("")),h=[],i=a.get("spells");for(b in i)f=i[b],g=(new GAME_NAME.Views.Spell({model:f})).render();return this},d.prototype.render=function(){return"This draws all the elements of the game to the screen",$(this.svgEl.node()).empty(),this.drawMap({map:this.model.get("game").get("map")}),this.drawCreatures(),this},d.prototype.drawCreatures=function(){"Draw all the creatures for each player";var a,b,c,d,e;this.creaturesGroup=this.svgEl.append("svg:g").attr("class","creatures_group"),e=this.model.get("game").get("players");for(c in e){d=e[c],b=d.get("creatures");for(c in b)a=b[c],this.drawCreature({creature:a,group:this.creaturesGroup})}return this},d.prototype.drawMap=function(a){"This draws the map by rendering each map tile individually";var b,c,d,e,f;this.mapGroup=this.svgEl.append("svg:g").attr("class","game_map"),d=this.mapGroup.append("svg:g").attr("class","map_tiles"),f=this.model.get("game").get("map").get("cells");for(c in f)e=f[c],b=new GAME_NAME.Views.Cell({model:e,cellSize:this.model.get("cellSize"),group:d}),e.set({view:b}),b.render({renderer:this.model});return GAME_NAME.logger.Render("renderer: map rendering complete")},d.prototype.drawCreature=function(a){return"Draws the passed in entity on the screen. Params expects a\ncreature model to be passed in",a=a||{},a.creature===void 0||a.group===void 0?(GAME_NAME.logger.error("ERROR! renderer view: drawCreature(): creature not passed in"),!1):(a.creature.get("view")||a.creature.set({view:new GAME_NAME.Views.Creature({model:a.creature,game:this.model.get("game"),group:a.group})}),a.creature.get("view").render({renderer:this,group:a.group}),this)},d}(Backbone.View)," ========================================================================    \n\nModel\n\n======================================================================== ",GAME_NAME.Models.Renderer=function(b){function d(){this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),"Keeps track of the renderer state",d.prototype.defaults={cellSize:{height:48,width:48},sprites:{terrain_0:"/static/image/sprites/map/grass_bg.png",terrain_1:"/static/image/sprites/map/blue_grass.jpg",terrain_2:"/static/image/sprites/map/road.jpg",rock:"/static/image/sprites/map/rock.png",creature_dragoon:"/static/image/sprites/creatures/dragoon.png"}},d.prototype.initialize=function(){return"When this renderer model is instaniated, store a reference to the\ngame object",this},d}(Backbone.Model)}.call(this),function(){" ========================================================================    \nspells.coffee\n\nContains the class definitions spells\n    Spells instaniated from server\n\n======================================================================== "," ========================================================================    \nAdd logging types\n======================================================================== ";var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};GAME_NAME.logger.options.log_types.push("Creature"),GAME_NAME.logger.options.setup_log_types()," ========================================================================    \n\nView\n\n======================================================================== ",GAME_NAME.Views.Spell=function(b){function d(){this.updateUI=a(this.updateUI,this),this.click=a(this.click,this),this.render=a(this.render,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),"Handles the UI / interaction",d.prototype.type="li",d.prototype.initialize=function(){return this.options.model===void 0?(GAME_NAME.logger.error("ERROR","creature view init(): params not properly passed in"),!1):(this.model=this.options.model,GAME_NAME.game.get("interaction").on("change:target",this.updateUI),this)},d.prototype.render=function(){return this.el=$('<li class="button">'+this.model.get("name")+"</li>"),$(".spells").append(this.el),this},d.prototype.click=function(){return"Called when the UI element is clicked.\nNeed to ensure the user CAN cast the spell",this},d.prototype.updateUI=function(){return console.log("hello",GAME_NAME.game.get("interaction").get("target")),this},d}(Backbone.View)," ========================================================================    \n\nModel    \n\n======================================================================== ",GAME_NAME.Models.Spell=function(b){function d(){this.renderEffect=a(this.renderEffect,this),this.initialize=a(this.initialize,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={name:"Magic Missle",cost:1,target:{},effect:function(){return this}},d.prototype.initialize=function(){return this},d.prototype.renderEffect=function(){return"This function is called by the renderer and will affect\nthe visible game state somehow",this},d}(Backbone.Model)}.call(this),function(){" ========================================================================    \ninit.js\n----------------------\nSets up page / UI related stuff and \n========================================================================";var a,b,c,d,e=this;GAME_NAME.init=function(){"Kick off the game creation";var a,b;return a={players:{enoex:new GAME_NAME.Models.Player({name:"Enoex",id:"402190r90war",spells:{summon_knight:new GAME_NAME.Models.Spell({name:"Summon Creature"}),magic_missile:new GAME_NAME.Models.Spell({name:"Magic Missle"})},creatures:{toestubbergoblin1_xx:new GAME_NAME.Models.Creature({name:"Toestubber_Goblin_1",location:{x:2,y:2}})}}),enjalot:new GAME_NAME.Models.Player({name:"Enjalot",id:"u90r2h180f80n",spells:{},creatures:{toestubbergoblin2_xx:new GAME_NAME.Models.Creature({name:"Toestubber_Goblin_2",location:{x:14,y:5}})}})}},a.activePlayer=a.players.enoex,GAME_NAME.game=new GAME_NAME.Models.Game(a),b=GAME_NAME.game.get("renderer"),b.renderUI(),b.render(),e}," ========================================================================    \nCall init\n========================================================================",d=GAME_NAME.Models.Renderer.prototype.defaults.sprites;for(a in d)c=d[a],b=new Image,b.src=c;$(document).ready(function(){return GAME_NAME.templates.target_creature=$("#template_ui_target_creature").html(),GAME_NAME.templates.target_cell=$("#template_ui_target_cell").html(),GAME_NAME.init()})}.call(this);